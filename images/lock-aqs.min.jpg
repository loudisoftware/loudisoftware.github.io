<svg xmlns="http://www.w3.org/2000/svg" width="841" viewBox="-0.5 -0.5 841 468" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="max-width:100%;max-height:468px" cursor="pointer"><rect y="17" width="90" height="110" rx="13.5" ry="13.5" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="36" height="12" overflow="visible" transform="translate(26.5 24.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:37px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit"><div><span>同步器</span></div></div></div></foreignObject><path d="M75 62h53v6h45.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M178.88 68l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M15 49h60v25H15z"/><foreignObject pointer-events="all" width="40" height="12" overflow="visible" transform="translate(24.5 55.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:40px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">Header</div></div></foreignObject><path d="M45 110v47h603v-24.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M648 127.12l3.5 7-3.5-1.75-3.5 1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M15 85h60v25H15z"/><foreignObject pointer-events="all" width="28" height="12" overflow="visible" transform="translate(30.5 91.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:30px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">Tailer</div></div></foreignObject><path d="M225 127q0 70 215 70t215 30.63" fill="none" stroke="#000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M655 232.88l-3.5-7 3.5 1.75 3.5-1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><foreignObject pointer-events="all" width="256" height="12" overflow="visible" transform="translate(252.5 188.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;background-color:#fff" display="inline-block" text-decoration="inherit">await时构建一个新的等待节点加入等待队列末尾</div></div></foreignObject><rect x="180" y="48" width="90" height="79" rx="11.85" ry="11.85" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(212.5 55.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M195 72h60v20h-60z"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(212.5 75.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">prev</div></div></foreignObject><path d="M255 112h33v-5h25.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M318.88 107l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M195 102h60v20h-60z"/><foreignObject pointer-events="all" width="22" height="12" overflow="visible" transform="translate(213.5 105.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">next</div></div></foreignObject><rect x="320" y="48" width="90" height="79" rx="11.85" ry="11.85" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(352.5 55.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path d="M335 82h-32v6h-26.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M271.12 88l7-3.5-1.75 3.5 1.75 3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M335 72h60v20h-60z"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(352.5 75.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">prev</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M335 102h60v20h-60z"/><foreignObject pointer-events="all" width="22" height="12" overflow="visible" transform="translate(353.5 105.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">next</div></div></foreignObject><rect x="450" y="47" width="90" height="79" rx="11.85" ry="11.85" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(482.5 54.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M465 71h60v20h-60z"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(482.5 74.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">prev</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M465 101h60v20h-60z"/><foreignObject pointer-events="all" width="22" height="12" overflow="visible" transform="translate(483.5 104.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">next</div></div></foreignObject><rect x="580" y="47" width="90" height="79" rx="11.85" ry="11.85" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(612.5 54.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M595 71h60v20h-60z"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(612.5 74.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">prev</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M595 101h60v20h-60z"/><foreignObject pointer-events="all" width="22" height="12" overflow="visible" transform="translate(613.5 104.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:24px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">next</div></div></foreignObject><path d="M395 112h28v-6h20.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M448.88 106l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M465 81h-27v7h-21.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M411.12 88l7-3.5-1.75 3.5 1.75 3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M525 111h28v-5h20.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M578.88 106l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M595 81h-27v6h-21.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M541.12 87l7-3.5-1.75 3.5 1.75 3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="none" pointer-events="all" d="M90 0h150v20H90z"/><foreignObject pointer-events="all" width="132" height="12" overflow="visible" transform="translate(91.5 2.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit" display="inline-block" text-decoration="inherit">setHeader(Node update)</div></div></foreignObject><path fill="none" pointer-events="all" d="M325 157h270v20H325z"/><foreignObject pointer-events="all" width="255" height="12" overflow="visible" transform="translate(326.5 159.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit" display="inline-block" text-decoration="inherit">compareAndSetTail(Node expect, Node update)</div></div></foreignObject><path fill="none" pointer-events="all" d="M182 24h90v20h-90z"/><foreignObject pointer-events="all" width="72" height="12" overflow="visible" transform="translate(183.5 26.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left" display="inline-block" font-size="12" font-family="Helvetica" color="red"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit" display="inline-block" text-decoration="inherit">首节点拥有锁</div></div></foreignObject><path d="M365 127q0 20-32.5 20T300 87.5Q300 28 332.5 28T365 41.63" fill="none" stroke="#000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M365 46.88l-3.5-7 3.5 1.75 3.5-1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M495 126q0 20-32.5 20T430 86.5Q430 27 462.5 27T495 40.63" fill="none" stroke="#000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M495 45.88l-3.5-7 3.5 1.75 3.5-1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M625 127q0 20-32.5 20T560 87.5Q560 28 592.5 28T625 41.63" fill="none" stroke="#000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M625 46.88l-3.5-7 3.5 1.75 3.5-1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="none" pointer-events="all" d="M310 0h310v20H310z"/><foreignObject pointer-events="all" width="292" height="12" overflow="visible" transform="translate(311.5 2.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit" display="inline-block" text-decoration="inherit">只有prev等于header的节点才会尝试获取锁，保证FIFO</div></div></foreignObject><path d="M105 227v-50H23v-43.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M23 128.12l3.5 7-3.5-1.75-3.5 1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><rect x="45" y="227" width="105" height="80" rx="12" ry="12" fill="#fff" stroke="#000" pointer-events="all"/><path fill="none" pointer-events="all" d="M70 227h70v20H70z"/><foreignObject pointer-events="all" width="51" height="12" overflow="visible" transform="translate(71.5 229.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit" display="inline-block" text-decoration="inherit">Condition</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M60 250h75v20H60z"/><foreignObject pointer-events="all" width="53" height="12" overflow="visible" transform="translate(70.5 253.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:55px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">firstWaiter</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M60 277h75v20H60z"/><foreignObject pointer-events="all" width="53" height="12" overflow="visible" transform="translate(70.5 280.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:53px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">lastWaiter</div></div></foreignObject><rect x="195" y="230" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(230.5 237.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path d="M135 260h53.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M193.88 260l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M205 262h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(213.5 265.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><rect x="330" y="232" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(365.5 239.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path d="M280 272h25v5h18.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M328.88 277l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M415 272h32v5h24.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M476.88 277l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M340 262h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(348.5 265.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><rect x="477.5" y="234" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(512.5 241.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M487.5 266h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(496.5 269.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><rect x="607.5" y="234" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(642.5 241.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path d="M98 297v17h557v-13.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M655 295.12l3.5 7-3.5-1.75-3.5 1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M562.5 276H585v3h16.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M606.88 279l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M617.5 266h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(626.5 269.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><rect x="45" y="347" width="105" height="80" rx="12" ry="12" fill="#fff" stroke="#000" pointer-events="all"/><path fill="none" pointer-events="all" d="M70 347h70v20H70z"/><foreignObject pointer-events="all" width="51" height="12" overflow="visible" transform="translate(71.5 349.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:left" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit" display="inline-block" text-decoration="inherit">Condition</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M60 370h75v20H60z"/><foreignObject pointer-events="all" width="53" height="12" overflow="visible" transform="translate(70.5 373.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:55px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">firstWaiter</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M60 397h75v20H60z"/><foreignObject pointer-events="all" width="53" height="12" overflow="visible" transform="translate(70.5 400.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:53px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">lastWaiter</div></div></foreignObject><rect x="195" y="350" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(230.5 357.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path d="M135 380h53.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M193.88 380l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M205 382h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(213.5 385.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><rect x="330" y="352" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(365.5 359.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path d="M280 392h25v5h18.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M328.88 397l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M415 392h32v5h24.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M476.88 397l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M340 382h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(348.5 385.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><rect x="477.5" y="354" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(512.5 361.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path fill="#fff" stroke="#000" pointer-events="all" d="M487.5 386h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(496.5 389.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><rect x="607.5" y="354" width="95" height="60" rx="9" ry="9" fill="#fff" stroke="#000" pointer-events="all"/><foreignObject pointer-events="all" width="24" height="12" overflow="visible" transform="translate(642.5 361.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:25px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">节点</div></div></foreignObject><path d="M98 417v17h557v-13.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M655 415.12l3.5 7-3.5-1.75-3.5 1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M562.5 396H585v3h16.63" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M606.88 399l-7 3.5 1.75-3.5-1.75-3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path fill="#fff" stroke="#000" pointer-events="all" d="M617.5 386h75v20h-75z"/><foreignObject pointer-events="all" width="57" height="12" overflow="visible" transform="translate(626.5 389.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;width:57px;white-space:nowrap;overflow-wrap:normal;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;white-space:normal" display="inline-block" text-decoration="inherit">nextWaiter</div></div></foreignObject><path d="M45 387H23V133.37" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M23 128.12l3.5 7-3.5-1.75-3.5 1.75z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><path d="M243 410q0 57 263.5 57T770 277q0-190-93.63-190" fill="none" stroke="#000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M671.12 87l7-3.5-1.75 3.5 1.75 3.5z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><foreignObject pointer-events="all" width="120" height="68" overflow="visible" transform="translate(720.5 230.5)"><div xmlns="http://www.w3.org/1999/xhtml" style="line-height:1.2;vertical-align:top;white-space:nowrap;text-align:center" display="inline-block" font-size="12" font-family="Helvetica" color="#000"><div xmlns="http://www.w3.org/1999/xhtml" style="text-align:inherit;background-color:#fff" display="inline-block" text-decoration="inherit"><span style="text-align:left;background-color:#f8f9fa">signal/signalAll时会把</span><br style="text-align:left;background-color:#f8f9fa"/><span style="text-align:left;background-color:#f8f9fa">等待队列的第一个节点</span><br style="text-align:left;background-color:#f8f9fa"/><span style="text-align:left;background-color:#f8f9fa">加入同步队列，同时等</span><br style="text-align:left;background-color:#f8f9fa"/><span style="text-align:left;background-color:#f8f9fa">待获取锁，只有获取到</span><br style="text-align:left;background-color:#f8f9fa"/><span style="text-align:left;background-color:#f8f9fa">锁await方法才会返回</span></div></div></foreignObject></svg>